# 一 概述：
## (1)术语:
- **MMU**: 内存管理单元.
- **Memory Arbiter**：内存仲裁器,一个插在总线和每个RAM芯片之间的硬件电路. 在多处理系统中, 所有CPU共享同一内存, 即独立的RAM芯片可被多个独立的CPU访问, 因为每个RAM芯片上的读或写串行执行, 内存仲裁器作用就是内存芯片空闲时准予一个CPU访问, 若忙则延迟该CPU的访问.
- **页**：线性地址分成固定长度的组,称为页,页内部连续的线性地址映射到连续的物理地址.
- **页框/物理页(page frame)**：内核把物理页作为内存管理的基本单元,每个页框包含一个页,体系结构不同,页框大小也不一致,通常32位体系机构支持4KB的页,64位则支持8KB的页. 例如: 在支持4KB页的1G物理内存机器上,物理内存被划分为262144个物理页. **struct page**物理结构表示系统中的物理页.
- **页表**：表示线性地址到物理地址的映射,存放在内存中.
- **TLB表(Translation Lookaside Buffer,快表)**: 用来缓冲线性地址到物理地址的映射,减少内存的访问.
- **NUMA**
- **Node**: 每个node关联到一个处理器, node又分为多个zone, 用struct pg_data_t结构表示.
- **区(zone)**:由于硬件限制,内核不能对所有物理页同等对待,有些物理页位于特定的物理地址,不能用于一些特定任务,由于这些限制,内核把页划分为不同区,内核把具有相同特性的页进行分组. 每个区由struct zone表示.
- **线性区(area)**: 内核通过线性区来表示进程的虚拟地址空间, 线性区由起始地址, 长度和一些权限来描述,详见进程的地址空间.

## (2)存储层次结构: 
- **寄存器**:访问速度最快,完全能与CPU协调工作,但价格十分昂贵,所有容量不大.
- **高速缓存**:将主存中经常访问的信息存放在高速缓存中,减少主存储器的访问次数,可大幅提高程序执行速度.依据程序局部性原理.
- **主存**:保存进程运行时的程序和数据,由于主存速度远低于CPU,所以引入了寄存器和高速缓存.
- **磁盘缓存**:利用主存中的存储空间来暂存从磁盘读出(或写入)的信息.
- **磁盘**
- **可移动存储介质**

## (3)备注：
- 32位CPU通常采用两级分页,64位才需要多级分页,具体取决于CPU类型,linux从2.6.11开始采用**四级分页模型**.
- 多处理器中,所有CPU共享同一内存,即RAM芯片可以有独立的CPU并发访问,这就需要内存仲裁器的硬件电路来控制串行读或写RAM芯片.
- 在单处理器系统中包含一个DMA控制器的特殊处理器,DMA会与CPU并发操作,因此也需要内存仲裁器.

# 二 内存管理区(zone)
## (1)背景:
- 一些硬件只能用特定的地址来执行DMA.
- 一些体系结构的物理寻址范围比虚拟寻址范围大, 造成一些内存不能永久的映射到内核空间上.

## (2)linux使用三个区(linux/mmzone.h的zone_type):
- ZONE_DMA: 这个区包含的页只能执行DMA操作.
- ZONE_NORMAL: 正常映射的页.
- ZONE_HIGHMEM: 高端内存, 其页不能永久映射到内核地址空间.

## (3)备注:
- 区的使用和分布和体系结构关系很大, 例如: 在X86(32位)ZONE_DMA(物理内存<16MB); ZONE_NORMAL(16-896MB); ZONE_HIGHMEM(>896MB). 在X86_64上ZONE_NORMAL表示所有物理内存, ZONE_HIGHMEM为空.
- 用于DMA的内存必须从ZONE_DMA分配, 一般用途的内存则既能从ZONE_NORMAL也能从ZONE_DMA分配, 一般内核会一般用途内存从一般常规区分配, 当内存不足时才会去抢占其它可用区的内存.
- 文档: Documentation/vm/highmem.txt.

# 三 物理页:
## (1)概述:
- 在系统中每个物理页都关联一个**struct page**. 

## (2)struct page:

## (3)备注:
- include/linux/mm_types.h
