# 一 同步机制:
## (1)无需同步:
- 最好的同步技术是不需要同步, 每种显式同步都有性能开销.
- 例如: 把部分内核变量声明为"每CPU变量"(per-cpu variable), 单个cpu可以随意读和修改自己的变量.

## (2)原子操作:
- CPU提供原子级别的指令操作, 例如:CAS等.

## (3)内存屏障:
- 内存屏障(memory barrier)确保, 原语之后的操作开始执行之前, 原语之前的操作都已经完成.
- 优化屏障(optimization barrier): 保证编译程序不会混淆原语之前和原语之后的汇编语言指令, 在linux中就是barrier()宏, 展开为asm volatile("":::"memory"). volatile关键字: 禁止编译器把asm中指令与其他指令重新组合. memory关键字: 强制编译器假定RAM中的所有内存单元都被汇编语言修改过, 因此编译器不能使用存放在CPU寄存器中的值来优化asm指令前的代码.

## (4)自旋锁:
- 多处理器环境中一种特殊锁, 在单处理器系统无效, 忙等.
- 在自旋锁忙等期间, 内核抢占是有效的, 等待自旋锁释放的进程可能被高优先级的进程替代.
- 读/写自旋锁: 增加内核的并发能力.

## (5)信号量:
- 实现一个加锁原语, 让等待着休眠, 直到等待的资源变为空闲.
- Linux提供两种信号量: 内核信号量(由内核控制路径使用); System V IPC信号量(用户态进程使用).

## (6)顺序锁

## (7)RCU(读-拷贝-更新)

## (8)互斥锁和条件变量

## (9)读写锁

## (10)文件锁/记录锁
