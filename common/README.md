# 一 概述：
## (1)功能:
- 内核负责响应中断的中断服务程序、负责管理多个进程分享处理器时间的调度程序、负责管理进程地址空间的内存管理器和网络、进程间通信等服务.
- 内核还负责管理系统的硬件设备，当硬件想和系统通信时，首先发出一个异步的中断信号去打断处理器执行，继而打断内核的执行，中断通常对应一个中断号，内核通过中断号去找对应的中断服务程序，并调用这个程序响应和处理中断.
- 内核处于系统态(内核空间)，拥有受保护的内存空间和访问硬件设备的所有权限.

## (2)Linux内核特性:
- 支持动态加载内核模块.
- 支持多处理器SMP机制.
- 支持内核抢占.

## (3)相关名词:
- kernel panic
- oops

## (4)相关文档:
- Intel: https://software.intel.com/en-us/articles/intel-sdm
- Redhat: https://www.redhat.com/en
- 内核的Documentation.
- http://www.brendangregg.com/overview.html

# 二 内核编译:
## (1)步骤:
- 配置: make config(选择特性)或make defconfig(根据你的体系结构产生产生默认配置).
- 编译: make.
- 安装: 和体系结构以及引导项息息相关.

## (2)Kbuild

## (3)Kconfig

## (4)备注:
- Document/kbuild目录.

# 三 内核开发:
## (1)不使用libc库和标准头文件
- 不能访问C库和标准C头文件，原因是速度和大小.
- 基本头文件在顶级目录include下,体系结构相关的头文件位于arch/<architecture>/include/asm目录下.

## (2)必须使用GNC C.

## (3)缺乏像用户空间那种内存保护机制
- 用户程序非法内存访问，内核会发现该错误，发送SIGSEGV信号，并结束该进程.
- 内核自己非法访问内存，则会导致oops，在内核中不该去做非法内存访问、引用空指针等事情.
- 内核中的内存不分页，用点一字节则物理内存就少点一字节.

## (4)难以执行浮点计算.

## (5)每个进程只有一个很小的定长的堆栈.

## (6)同步和并发:
- 由于内核支持异步中断、抢占和SMP，因此必须时刻注意同步和并发.
- 常用解决竞争方法: 自旋锁和信号量.

## (7)可移植性:
- 必须将于体系结构相关代码从内核代码树的特定目录中分离出来.
- 保持字节序、64位对齐、不假定字长和页面长度等有助于可移植性.

# 四 常用目录:
## (1)arch:
- 特定体系结构的代码.

## (2)block:
- 块设备I/O层.

## (3)crypto:
- 加密API.

## (4)Documents:
- 内核源码文档.

## (5)drivers:
- 设备驱动程序.

## (6)firmware:
- 使用某些设备驱动程序而需要的设备固件.

## (7)fs:
- VFS和各种文件系统.

## (8)include:
- 内核头文件.

## (9)init:
- 内核引导和初始化.

## (10)ipc:
- 进程通信代码.

## (11)kernel:
- 内核核心子系统，例如:调度程序.

## (12)lib:
- 通用内核函数.

## (13)mm:
- 内存管理子系统和VM.

## (14)net:
- 网络子系统.

## (15)security:
- Linux安全模块.

## (16)usr:
- 早期用户空间代码.

## (17)tools:
- Linux开发中有用的工具.

## (18)virt:
- 虚拟化基础结构.

## (19)scripts:
- 编译内核使用的脚本.

## (20)samples:
- 示例代码.

## (21)sound:
- 语音子系统.

## (22)其它文件:
- COPYING: 内核许可证.
- CREDITS: 开发很多内核代码的开发者.
- MAINTAINERS: 维护者列表, 负责维护内核子系统和驱动程序.
- Makefile: 基本内核的Makefile.

# 五 符号表
